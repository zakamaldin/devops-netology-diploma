# Дипломная работа по курсу DevOps
Содержит 2 terraform-проекта:

- diploma_configure - создает обвязку для хранения состояния основного проекта, несколько сервисных аккаунтов и s3-бакет для хранения стейта и БД для блокировок
- diploma_project - основной проект, содержащий в себе файлы для развертываня сетей, лкастера k8s и jenkins
## Порядок запуска

### Конфигурироание

0. Иницировать `yc`
1. Перейти в конфигурационный проект `diploma_configure`
2. Выполинть `terraform init`
3. Выполнить `terraform apply`
4. Перейти на вкладку `Навигация` в созданнную БД `zakamaldin-diploma-state-ydb` в `YandexCloud`
5. Создать таблицу со следующим параметрами:
    - Имя: `zakamaldin-diploma-tflock`
    - Тип: `Документная таблица`
    - Колонка
      - Имя: `LockID`
      - Тип: `String`
      - Ключ партиционирования: `True`
6. Перейти в основной проект `diploma_project`
7. Выполинть `terraform init` для первоначальной инициализации
8. Раскомментировать блок `backend "s3"` в `providers.tf`
9. Заполнить параметр `dynamodb_endpoint` значением из вывода конфигурационного проекта
10. Выполнить команду `terraform init` из созданного файла `init_s3_backend_command.sh` в конфигурационном проекте